var getIconName=function(){return action.savedElements.iconName},getWallpaper=function(){return action.wallpaper?action.wallpaper:""},getOverlay=function(){return action.savedElements.overlay?action.savedElements.overlay:""},getElements=function(){return JSON.stringify(action.savedElements.placedElements)||""};var constants={notSoConstantArray:[],toolArray:"background~Background~fa fa-photo~backgroundDiv;overlay~Overlay~fa fa-clipboard~overlayDiv;element~Show Elements Panel~fa fa-flask~elementDiv;save~Save Theme~fa fa-upload~saveDiv;load~Load Theme~fa fa-download~loadDiv;clear~Clear Theme~fa fa-eraser~clearDiv".split(";"),backgroundArray:"cgBackground~Change Background~fa fa-photo~cgBackgroundDiv;openBackground~View Background in New Tab~fa fa-external-link-square~openBackgroundDiv;backgroundBlur~Change Background Blur~fa fa-bullseye~backgroundBlurDiv;openBlurryBackground~View Blurred Background in New Tab~fa fa-external-link~openBlurryBackgroundDiv;backToTools~Back~fa fa-arrow-left~backToToolsDiv;clearBackground~Clear Background~fa fa-trash~clearBackgroundDiv".split(";"),
overlayArray:["cgOverlay~Change Overlay~fa fa-clipboard","backToTools~Back~fa fa-arrow-left","clearOverlay~Clear Overlay~fa fa-trash"],editArray:"size~Change Font Size~fa fa-font~sizeDiv;width~Change Width~fa fa-arrows-h~widthDiv;position~Change Position~fa fa-arrows~positionDiv;color~Change Color~fa fa-eyedropper~colorDiv;align~Change Alignment~fa fa-align-center~alignDiv;fonts~Change Font~ fa fa-language~fontsDiv;transform~Change Transformations~fa fa-level-up~transformDiv;uppercase~Change Uppercase~fa fa-text-height~uppercaseDiv;weight~Change Font Weight~fa fa-text-width~weightDiv;style~Change Font Style~fa fa-italic~styleDiv;affixes~Change Prefix/Suffix~fa fa-edit~affixesDiv;shadow~Edit Text Shadow~fa fa-underline~shadowDiv;linearGradient~Edit Linear Text Color Gradient~fa fa-barcode~linearTextGradientDiv;delete~Delete item~fa fa-trash-o~deleteDiv".split(";"),
customTextArray:"customText~Change Text~fa fa-pencil~textDiv;size~Change Font Size~fa fa-font~sizeDiv;width~Change Width~fa fa-arrows-h~widthDiv;position~Change Position~fa fa-arrows~positionDiv;color~Change Color~fa fa-eyedropper~colorDiv;align~Change Alignment~fa fa-align-center~alignDiv;fonts~Change Font~ fa fa-language~fontsDiv;transform~Change Transformations~fa fa-level-up~transformDiv;uppercase~Change Uppercase~fa fa-text-height~uppercaseDiv;weight~Change Font Weight~fa fa-text-width~weightDiv;style~Change Font Style~fa fa-italic~styleDiv;shadow~Edit Text Shadow~fa fa-underline~shadowDiv;linearGradient~Edit Linear Text Color Gradient~fa fa-barcode~linearTextGradientDiv;delete~Delete item~fa fa-trash-o~deleteDiv".split(";"),
affixArray:["customPrefix~Change Prefix~fa fa-long-arrow-left~prefixDiv","customSuffix~Change Suffix~fa fa-long-arrow-right~suffixDiv","backToEdit~Back~fa fa-arrow-left~backToEditDiv","clearAffixes~Clear Prefix and Suffix~fa fa-trash~clearAffixesDiv"],shadowArray:"hShadow~Horizontal~fa fa-arrows-h~hShadowDiv;vShadow~Vertical~fa fa-arrows-v~vShadowDiv;blur~Blur Radius~fa fa-dot-circle-o~blurDiv;shadowColor~Change Color~fa fa-eyedropper~shadowColorDiv;backToEdit~Back~fa fa-arrow-left~backToEditDiv;clearShadow~Clear Shadow~fa fa-trash~clearShadowDiv".split(";"),
boxShadowArray:"boxhShadow~Horizontal~fa fa-arrows-h~boxhShadowDiv;boxvShadow~Vertical~fa fa-arrows-v~boxvShadowDiv;boxblur~Blur Radius~fa fa-dot-circle-o~boxblurDiv;boxshadowColor~Change Color~fa fa-eyedropper~boxshadowColorDiv;backToEdit~Back~fa fa-arrow-left~backToEditDiv;boxclearShadow~Clear Shadow~fa fa-trash~boxclearShadowDiv".split(";"),transformArray:["rotation~Change Rotation Angle~fa fa-repeat~rotationDiv","skewX~Change X Skew~fa fa-text-width~skewXDiv","skewY~Change Y Skew~fa fa-text-height~skewYDiv",
"backToEdit~Back~fa fa-arrow-left~backToEditDiv","clearTransform~Clear Transformations~fa fa-trash~clearTransformsDiv"],linearGradientArray:"gradientType~Gradient Type~fa fa-square~gradientTypeDiv;linearGradientAngle~Change Gradient Angle~fa fa-repeat~linearGradientAngleDiv;linearGradientStartColor~Change Start Color~fa fa-eyedropper~linearGradientStartColorDiv;linearGradientStopColorOne~Change Color Stop 1~fa fa-eyedropper~linearGradientStopColorOneDiv;linearGradientStopColorTwo~Change Color Stop 2~fa fa-eyedropper~linearGradientStopColorTwoDiv;backToEdit~Back~fa fa-arrow-left~backToEditDiv;clearGradient~Clear Gradient~fa fa-trash~clearGradientDiv".split(";"),
linearBoxGradientArray:"linearGradientAngle~Change Gradient Angle~fa fa-repeat~linearGradientAngleDiv;linearGradientStartColor~Change Start Color~fa fa-eyedropper~linearGradientStartColorDiv;linearGradientStopColorOne~Change Color Stop 1~fa fa-eyedropper~linearGradientStopColorOneDiv;linearGradientStopColorTwo~Change Color Stop 2~fa fa-eyedropper~linearGradientStopColorTwoDiv;backToEdit~Back~fa fa-arrow-left~backToEditDiv;clearGradient~Clear Gradient~fa fa-trash~clearGradientDiv".split(";"),boxEditArray:"width~Change Width~fa fa-arrows-h~widthDiv;height~Change Height~fa fa-arrows-v~heightDiv;position~Change Position~fa fa-arrows~positionDiv;radius~Change Radius~fa fa-circle~radiusDiv;boxShadow~Edit Box Shadow~fa fa-cube~boxShadowDiv;transform~Change Transformations~fa fa-level-up~transformDiv;boxColor~Change Color~fa fa-eyedropper~boxColorDiv;border~Edit Box Border~fa fa-square-o~borderDiv;linearBoxGradient~Edit Linear Box Color Gradient~fa fa-barcode~linearTextGradientDiv;delete~Delete item~fa fa-trash-o~deleteDiv".split(";"),
circleEditArray:"width~Change Width~fa fa-arrows-h~widthDiv;position~Change Position~fa fa-arrows~positionDiv;boxShadow~Edit Circle Shadow~fa fa-cube~boxShadowDiv;transform~Change Transformations~fa fa-level-up~transformDiv;boxColor~Change Color~fa fa-eyedropper~boxColorDiv;border~Edit Box Border~fa fa-square-o~borderDiv;linearBoxGradient~Edit Linear Box Color Gradient~fa fa-barcode~linearTextGradientDiv;delete~Delete item~fa fa-trash-o~deleteDiv".split(";"),borderArray:["borderStyle~Border Style~fa fa-ellipsis-v~borderStyleDiv",
"borderWidth~Border Width~fa fa-arrows-h~borderWidthDiv","border-color~Border Color~fa fa-eyedropper~border-colorDiv","backToEdit~Back~fa fa-arrow-left","clearBorder~Clear Border~fa fa-trash"],iconArray:["iconsize~Change Icon Size~fa fa-expand~changeIconDiv","position~Change Position~fa fa-arrows~positionDiv","changeicon~Change Icon~fa fa-code-fork~changeIconDiv","transform~Change Transformations~fa fa-level-up~transformDiv","delete~Delete item~fa fa-trash-o~deleteDiv"],gridSizeTop:160,gridSizeLeft:284,
preloadWhitelist:{size:"",width:"",position:"",align:"",uppercase:"",weight:"",style:"",customPrefix:"",customSuffix:"",hShadow:"",vShadow:"",blur:"",boxhShadow:"",boxvShadow:"",boxblur:"",rotation:"",skewX:"",skewY:"",gradientType:"",linearGradientAngle:"",height:"",radius:"",iconsize:"",customText:"",borderStyle:"",borderWidth:"",posSystem:"",multiPos:""},iconList:"MonolyphDark MonolyphFlat MonolyphLight city blue clima deep plex Flex GlowWhite june Klear lines mauri mauri2 MNMLB MNMLBW MNMLW mw nude plastic playful primusweather Purcy realicons reddock round round2 shadow shiny simple simply six sixtynine Sk37ch smash stardock swhite toon toon2 topaz weathercom wetter yahoo black BlackOrange blacky".split(" "),
positioningSystemOption:"posSystem~Change Positioning System~fa fa-arrows-alt~posSystemDiv",multiPosition:"multiPos~Change Position~fa fa-arrows~multiPosDiv"};var action={savedElements:{},movedElements:{},wallpaper:"",uploadSelection:"",selectedItem:"",selectedItems:[],multiPositioningSystem:"relative",actionQueue:[],queuePosition:-1,isUndoingRedoing:!1,sizeQueueTimeout:{timeout:null,isTimeoutRunning:!1,previousCssKey:"",previousAction:null,initialValue:""},isEditingText:!1,toolPanel:function(a){a=a.target.id;action.uploadSelection=a;"cgOverlay"!==a&&"cgBackground"!==a||$("#bgInput").click();"overlay"===a&&this.showIconMenu(constants.overlayArray,-1);"clearOverlay"===
a&&($(".screenoverlay").css("background-image",""),action.savedElements.overlay="",action.saveStorage());"background"===a&&this.showIconMenu(constants.backgroundArray,-1);"openBackground"===a&&this.openBackground("original");"backgroundBlur"===a&&this.cgSize("backgroundBlur",constants.backgroundArray[2],"",0,100,"backBlur","backBlur",action.backgroundBlur,!1,!1,"Background Blur");"openBlurryBackground"===a&&this.openBackground("blurry");"clearBackground"===a&&this.setBG("");"backToTools"===a&&this.showIconMenu(constants.toolArray,
-1);"clear"===a&&action.clearTheme(-1);"save"===a&&this.saveTheme();"load"===a&&(location.href="http://lockplus.us/creator/load/mobile.php");"element"===a&&(action.elementIconClick(),showElementPanel());"size"===a&&this.cgSize("fontSize",constants.editArray[0],"px",5,300,"font-size","font-size",action.updateSize);"width"===a&&this.cgSize("widthSize",constants.editArray[1],"px",1,$(".screen").width(),"width","width",action.updateSize);"height"===a&&this.cgSize("heightSize",constants.boxEditArray[1],
"px",1,$(".screen").height(),"height","height",action.updateSize);"position"===a&&this.cgPosition();"align"===a&&this.cgalign();"fonts"===a&&this.cgfont();"uppercase"===a&&this.cguppercase();"style"===a&&this.cgStyle();"weight"===a&&this.cgweight();"shadow"===a&&action.showIconMenu(constants.shadowArray,-1);"boxShadow"===a&&action.showIconMenu(constants.boxShadowArray,-1);"hShadow"===a&&this.cgSize("hShadow",constants.shadowArray[0],"px",-100,100,"hShadow","hShadow",action.updateShadow,!1,!1,"Horizontal");
"vShadow"===a&&this.cgSize("vShadow",constants.shadowArray[1],"px",-100,100,"vShadow","vShadow",action.updateShadow,!1,!1,"Vertical");"blur"===a&&this.cgSize("blur",constants.shadowArray[2],"px",0,50,"blur","blur",action.updateShadow,!1,!1,"Blur Radius");"radius"===a&&this.cgSize("radiusSize",constants.boxEditArray[3],"px",0,$("#"+action.selectedItem).width()/2,"border-radius","border-radius",action.updateSize,!1,!1,"Box Radius");"transform"===a&&action.showIconMenu(constants.transformArray,-1);"rotation"===
a&&this.cgSize("rotationAngle",constants.transformArray[0],"deg",0,360,"rotate","rotate",action.updateTransform,!1,!1,"Rotation Angle");"skewX"===a&&this.cgSize("skewXAngle",constants.transformArray[1],"deg",0,360,"skewX","skewX",action.updateTransform,!1,!1,"X Skew Angle");"skewY"===a&&this.cgSize("skewYAngle",constants.transformArray[2],"deg",0,360,"skewY","skewY",action.updateTransform,!1,!1,"Y Skew Angle");"clearTransform"===a&&action.updateTransform("","","","","clear");"shadowColor"===a&&this.cgShadowColor();
"clearShadow"===a&&this.updateShadow("","","","","clear");"backToEdit"===a&&action.showMultiSelectionMenu();"boxhShadow"===a&&this.cgSize("boxhShadow",constants.boxShadowArray[0],"px",-100,100,"boxhShadow","boxhShadow",action.updateShadow,!1,!1,"Horizontal");"boxvShadow"===a&&this.cgSize("boxvShadow",constants.boxShadowArray[1],"px",-100,100,"boxvShadow","boxvShadow",action.updateShadow,!1,!1,"Vertical");"boxblur"===a&&this.cgSize("boxblur",constants.boxShadowArray[2],"px",0,50,"boxblur","boxblur",
action.updateShadow,!1,!1,"Blur Radius");"boxshadowColor"===a&&this.cgShadowColor(!0);"boxclearShadow"===a&&this.updateShadow("","","","","clear");"color"===a&&this.cgcolor(!1,"color","colorDiv");"boxColor"===a&&this.cgcolor(!1,"background-color","boxColorDiv");"customText"===a&&this.cgCustomText();"delete"===a&&action["delete"]();"iconsize"===a&&this.cgSize("iconSize",constants.iconArray[0],"px",5,$(".screen").width(),"width","width",action.updateSize);"changeicon"===a&&this.populateIcons();"affixes"===
a&&this.showIconMenu(constants.affixArray,-1);"customPrefix"===a&&this.cgAffix("prefix");"customSuffix"===a&&this.cgAffix("suffix");"clearAffixes"===a&&this.cgAffix("clear");"border"===a&&this.showIconMenu(constants.borderArray,-1);"borderStyle"===a&&this.cgBorderStyle();"borderWidth"===a&&this.cgSize("borderWidth",constants.borderArray[1],"px",0,200,"border-width","borderWidth",action.updateSize);"border-color"===a&&this.cgcolor(!1,"border-color","border-colorDiv");"clearBorder"===a&&this.setCss(action.selectedItem,
"border","");"posSystem"===a&&this.cgPosSystem();"multiPos"===a&&this.cgMultiPosition();null!=action.selectedItem&&null!=a.toLowerCase().match(/gradient/gmi)&&"lin"!=document.getElementById(action.selectedItem).style.background.substring(0,3)&&"linearGradient"!=a&&"linearBoxGradient"!=a&&"linearTextGradientDiv"!=a&&action.setCss(action.selectedItem,"background","linear-gradient(rgb(255,0,0),rgb(255,255,0) 50%,rgb(0,0,255) 90%)");"linearBoxGradient"===a&&this.showIconMenu(constants.linearBoxGradientArray,
-1);"linearGradient"===a&&this.showIconMenu(constants.linearGradientArray,-1);"gradientType"===a&&this.cgGradientPurpose();"linearGradientAngle"===a&&this.cgSize("rotateLinearGradient",constants.linearGradientArray[1],"deg",0,360,"rotate","rotate",action.updateGradient,!1,!1,"Rotate Gradient");"linearGradientStartColor"===a&&this.cgLinearGradientColor(constants.linearGradientArray[2],"color~0.5");"linearGradientStopColorOne"===a&&(this.cgLinearGradientColor(constants.linearGradientArray[3],"color~1"),
this.cgSize("linGradientStopOnePercent",constants.linearGradientArray[3],"%",0,100,"pos~1","pos~1",action.updateGradient,!1,!1,"Stop 1 Distance"));"linearGradientStopColorTwo"===a&&(this.cgLinearGradientColor(constants.linearGradientArray[4],"color~2"),this.cgSize("linGradientStopTwoPercent",constants.linearGradientArray[4],"%",0,100,"pos~2","pos~2",action.updateGradient,!1,!1,"Stop 2 Distance"));"clearGradient"===a&&this.updateGradient("","","","","clear")},elementIconClick:function(){$(".elementPanel").is(":visible")||
(action.setHelpText("Choose item from right panel"),$(".elementPanel").attr("data-shown")||(action.toggleAllElementPanels(),$(".elementPanel").attr("data-shown","Congratulations, curious one. You are the millionth visitor!")));$(".elementPanel").is(":visible")?$(".elementPanel").animate({opacity:0,marginTop:"-300px"},{duration:200,specialEasing:{opacity:"linear",marginTop:"easeInOutCirc"},complete:function(){$(".elementPanel").toggle()}}):($(".elementPanel").css({opacity:"0",marginTop:"-300px"}),
$(".elementPanel").toggle(),$(".elementPanel").animate({opacity:1,marginTop:0},{duration:200,specialEasing:{opacity:"linear",marginTop:"easeInOutCirc"},complete:function(){}}))},setFont:function(a){action.setCss(action.selectedItem,"font-family",a);$("#fList").toggle("display")},setCss:function(a,b,c){if(0<action.selectedItems.length&&("relative"!==action.multiPositioningSystem||"left"!==b&&"top"!==b)){var d=function(a,b){for(var c=0;c<a.length;c++)if(a[c][0]===b)return!0;return!1};"string"===typeof a&&
(a=[[a,b,c]]);for(var e=0;e<action.selectedItems.length;e++)d(a,action.selectedItems[e])||a.push([action.selectedItems[e],a[0][1],a[0][2]])}if("string"===typeof a){if("-webkit-transform"===b)try{var g=document.getElementById(a).style.webkitTransform}catch(l){alert("Sorry, please use chrome or safari for transforms.")}else g=document.getElementById(a).style[b];$("#"+a).css(b,c);action.savedElements.placedElements[a][b]=c;action.saveStorage();clearTimeout(action.sizeQueueTimeout.timeout);""===action.sizeQueueTimeout.initialValue&&
(action.sizeQueueTimeout.initialValue=g);if("-webkit-transform"===b)try{var f=document.getElementById(a).style.webkitTransform}catch(l){alert("Sorry, please use chrome or safari for transforms.")}else f=document.getElementById(a).style[b];c=["setCss",[a,b,action.sizeQueueTimeout.initialValue,f]];b!==action.sizeQueueTimeout.previousCssKey&&""!==action.sizeQueueTimeout.previousCssKey&&action.sizeQueueTimeout.isTimeoutRunning&&(action.addAction(action.sizeQueueTimeout.previousAction),action.sizeQueueTimeout.initialValue=
g);action.sizeQueueTimeout.previousAction=c;action.sizeQueueTimeout.timeout=setTimeout(function(){action.addAction(action.sizeQueueTimeout.previousAction);action.sizeQueueTimeout.initialValue="";action.sizeQueueTimeout.isTimeoutRunning=!1},400);action.sizeQueueTimeout.isTimeoutRunning=!0;action.sizeQueueTimeout.previousCssKey=b}else if("object"===typeof a){g=[];c=["setCss",[]];b=[];for(e=0;e<a.length;e++){if("string"===typeof a[e][1])g.push(document.getElementById(a[e][0]).style[a[e][1]]),b.push(a[e][1]),
$("#"+a[e][0]).css(a[e][1],a[e][2]),action.savedElements.placedElements[a[e][0]][a[e][1]]=a[e][2],c[1].push([a[e][0],a[e][1],"",a[e][2]]);else{for(var d=[],f=[],h=[],k=0;k<a[e][1].length;k++)d.push(document.getElementById(a[e][0]).style[a[e][1][k]]),$("#"+a[e][0]).css(a[e][1][k],a[e][2][k]),"undefined"!=typeof action.savedElements.placedElements[a[e][0]]&&(action.savedElements.placedElements[a[e][0]][a[e][1][k]]=a[e][2][k]),f.push(a[e][1][k]),h.push(a[e][2][k]);g.push(d);b.push(f);c[1].push([a[e][0],
f,"",h])}action.saveStorage()}clearTimeout(action.sizeQueueTimeout.timeout);""===action.sizeQueueTimeout.initialValue&&(action.sizeQueueTimeout.initialValue=g);for(e=0;e<c[1].length;e++)for(k=1;k<c[1][e].length;k++)""===c[1][e][k]&&(c[1][e][k]=action.sizeQueueTimeout.initialValue[e]);b.toString()!==action.sizeQueueTimeout.previousCssKey.toString()&&""!==action.sizeQueueTimeout.previousCssKey&&action.sizeQueueTimeout.isTimeoutRunning&&(action.addAction(action.sizeQueueTimeout.previousAction),action.sizeQueueTimeout.initialValue=
g);action.sizeQueueTimeout.previousAction=c;action.sizeQueueTimeout.timeout=setTimeout(function(){action.addAction(action.sizeQueueTimeout.previousAction);action.sizeQueueTimeout.initialValue="";action.sizeQueueTimeout.isTimeoutRunning=!1},400);action.sizeQueueTimeout.isTimeoutRunning=!0;action.sizeQueueTimeout.previousCssKey=b}else console.log("Ya done goofed (setCss)")},"delete":function(){if(0<action.selectedItems.length){for(var a=0;a<action.selectedItems.length;a++)action.removeFromScreen(action.selectedItems[a],
!0);action.selectedItems=[]}else action.removeFromScreen(action.selectedItem,!0)},cgfont:function(){$("#fList").empty();$("#fList").append("<li>Helvetica</li>");for(var a=0;a<fontArray.length;a++){var b=document.createElement("li");b.innerHTML=$("#"+action.selectedItem).text()+"-"+fontArray[a];b.style.fontFamily=fontArray[a];b.title=fontArray[a];$("#fList").append(b)}$("#fList").toggle("display");setTimeout(function(){stroll.bind("#font ul")},1E3)},populateIcons:function(){$(".iconList").empty();
for(var a=0;a<constants.iconList.length;a++){var b=document.createElement("img");b.src="weather/"+constants.iconList[a]+".png";b.id=constants.iconList[a];$(".iconList").append(b)}$(".iconList").toggle("display")},setNewIcon:function(a,b){b||$(".iconList").toggle("display");$(".icon").attr("src","weather/real/"+a+".png");action.savedElements.iconName=a;this.saveStorage()},cgLinearGradientColor:function(a,b){var c="#"+a.split("~")[3];$(c).spectrum({showInitial:!0,maxSelectionSize:66,localStorageKey:"spectrum",
showAlpha:!0,showInput:!0,preferredFormat:"rgb",showPalette:!0,color:action.updateGradient("",b,"","","get"),palette:["black white #0074d9 #2c3e50 #27ae60 #e74c3c #393939 #3498db #2980b9 #2ecc71 #66cc99 #019875 #96281b #96281b #f64747 #e26a6a #f5ab35 #f39c12 #f89406 #f27935 #6c7a89 #95a5a6 #bdc3c7 #bfbfbf #674172 #663399 #8e44ad #9b59b6 #db0a5b #d2527f #f62459 #16a085 #d2d7d3 #4183d7 #59abe3 #3a539b".split(" ")]});setTimeout(function(){$(c).spectrum("show")},0);$(c).on("move.spectrum",function(a,
c){action.updateGradient("",b,"",c.toRgbString(),"set")})},updateGradient:function(a,b,c,d,e){if("clear"===e)return-1<action.selectedItem.indexOf("box")?action.setCss([[action.selectedItem,["background","background-color"],["","red"]]]):action.setCss([[action.selectedItem,["background","-webkit-background-clip","-webkit-text-fill-color"],["","",""]]]),"nothing";var g=document.getElementById(action.selectedItem).style.background;if(""!=g){var g=g.replace(/(rgba?\([^)]+\))/gmi,function(a){return a.replace(/[/(]/g,
"{").replace(/[,]/g,"!").replace(/[/)]/g,"}").replace(/[ ]/g,"")}),f=g.split("(");isNaN(f[1].substring(0,1))&&(g=f[0]+"(180deg,"+f[1]);g=g.replace(/deg/g,"").replace(/[%]/g,"").split(/[(), ]/)}else g="linear-gradient 179 rgb(255,0,0) rgb(255,255,0) 50 rgb(0,0,255) 90".split(" ");for(f=0;f<g.length;f++)""===g[f]?(g.splice(f,1),f--):null!=g[f].match(/[!]/g)&&(g[f]=g[f].replace(/[{]/g,"(").replace(/[!]/g,",").replace(/[}]/g,")"));var f=0,h=b.split("~");if(("pos"===h[0]||"rotate"===b)&&"set"===e){var k=
JSON.parse($(a).attr("max")),l=JSON.parse($(a).attr("min"));JSON.parse($(a).val())>=JSON.parse(k)&&$(a).val(k);JSON.parse($(a).val())<=JSON.parse(l)&&$(a).val(l)}"rotate"===b?f=1:2*JSON.parse(h[1])+1>=g.length?"set"===e?"pos"===h[0]?f=g.length-1:(g.push("rgb(0,0,255)"),g.push("100"),f=g.length-2):"get"===e&&(g.push("rgb(0,0,255)"),g.push("100"),"color"===h[0]?f=g.length-2:"pos"===h[0]&&(f=g.length-1)):"color"===h[0]?f=2*JSON.parse(h[1])+1:"pos"===h[0]&&(f=2*JSON.parse(h[1])+2);if("set"===e){1>=f||
"pos"===h[0]?g[f]=$(a).val():"color"===h[0]&&(g[f]=d);a="";for(f=0;f<g.length;f++)isNaN(g[f])?0===f?g[f]+="(":2===f?g[f]+=",":2<f&&(g[f]+=" "):(g[f]=1===f?g[f]+"deg":g[f]+"%",g[f]=f===g.length-1||f+1===g.length-1&&""===g[f+1]?g[f]+")":g[f]+","),a+=g[f];$("#"+action.selectedItem).css("background-image","red");action.setCss(action.selectedItem,"background",a);action.saveStorage()}else if("get"===e)return g[f]+c},updateTransform:function(a,b,c,d,e){try{var g=document.getElementById(action.selectedItem).style.webkitTransform}catch(h){alert("Sorry, please use chrome or safari for transforms.")}var g=
""!=g?g.replace(/deg/g,"").split(/[()]/):"rotate;0; skewX;0; skewY;0".split(";"),f=0;switch(b){case "rotate":f=1;break;case "skewX":f=3;break;case "skewY":f=5}if("set"===e){g[f]=$(a).val();e="";for(f=0;f<g.length;f++)""!=g[f]&&(isNaN(g[f])?g[f]+="(":g[f]+="deg)",e+=g[f]);"rotate(0deg) skewX(0deg) skewY(0deg)"===e?action.updateTransform(a,b,c,d,"clear"):action.setCss(action.selectedItem,"-webkit-transform",e)}else{if("get"===e)return g[f]+c;"clear"===e&&action.setCss(action.selectedItem,"-webkit-transform",
"")}},updateShadow:function(a,b,c,d,e){var g=-1<action.selectedItem.indexOf("box"),f=g?$("#"+action.selectedItem).css("box-shadow"):$("#"+action.selectedItem).css("text-shadow"),f="none"!=f?f.split(" "):["#ffffff","0px","0px","0px"];-1< !f[0].indexOf("px")&&-1<f[0].indexOf("rgb")&&(-1<f[0].indexOf("rgba")?(f[0]=f[0]+f[1]+f[2]+f[3],f[1]=f[4],f[2]=f[5],f[3]=f[6]):(f[0]=f[0]+f[1]+f[2],f[1]=f[3],f[2]=f[4],f[3]=f[5]));var h=0;d===(g?"boxhShadow":"hShadow")?h=1:d===(g?"boxvShadow":"vShadow")?h=2:d===(g?
"boxblur":"blur")?h=3:d===(g?"boxcolor":"color")&&(h=0);if("set"===e)d="","#"===a.charAt(0)?f[h]=$(a).val()+c:f[h]=b,d=f[0]+" "+f[1]+" "+f[2]+" "+f[3],g?action.setCss(action.selectedItem,"box-shadow",d):action.setCss(action.selectedItem,"text-shadow",d);else{if("get"===e)return f[h];"clear"===e&&(g?action.setCss(action.selectedItem,"box-shadow","none"):action.setCss(action.selectedItem,"text-shadow","none"))}},cgShadowColor:function(a){var b=a?"#boxshadowColorDiv":"#shadowColorDiv";$(b).spectrum({showInitial:!0,
maxSelectionSize:66,localStorageKey:"spectrum",showAlpha:!0,showInput:!0,preferredFormat:"rgb",showPalette:!0,color:action.updateShadow("","","","","get"),palette:["black white #0074d9 #2c3e50 #27ae60 #e74c3c #393939 #3498db #2980b9 #2ecc71 #66cc99 #019875 #96281b #96281b #f64747 #e26a6a #f5ab35 #f39c12 #f89406 #f27935 #6c7a89 #95a5a6 #bdc3c7 #bfbfbf #674172 #663399 #8e44ad #9b59b6 #db0a5b #d2527f #f62459 #16a085 #d2d7d3 #4183d7 #59abe3 #3a539b".split(" ")]});setTimeout(function(){$(b).spectrum("show")},
0);$(b).on("move.spectrum",function(b,d){action.updateShadow(a?"box":"",d.toRgbString(),"px","color","set")})},cgCustomText:function(){action.cgText(constants.customTextArray[0],"Custom Text","Text",function(a){$("#"+action.selectedItem).html($(a).val());var b=16*$(a).val().length;$(a).css("width",150<b?b:150);action.savedElements.placedElements[action.selectedItem].innerHTML=$(a).val();action.saveStorage()},function(){return $("#"+action.selectedItem).html()})},cgAffix:function(a){"prefix"===a?action.cgText(constants.affixArray[0],
"Custom Prefix","Prefix",function(a){action.affixCallbacks(a,"prefix","set")},function(a){return action.affixCallbacks(a,"prefix","get")}):"suffix"===a?action.cgText(constants.affixArray[1],"Custom Suffix","Suffix",function(a){action.affixCallbacks(a,"suffix","set")},function(a){return action.affixCallbacks(a,"suffix","get")}):"clear"===a&&($("#"+action.selectedItem).html($("#"+action.selectedItem).html().replace($("#"+action.selectedItem).attr("data-prefix"),"")),$("#"+action.selectedItem).html($("#"+
action.selectedItem).html().replace($("#"+action.selectedItem).attr("data-suffix"),"")),$("#"+action.selectedItem).attr("data-prefix",""),$("#"+action.selectedItem).attr("data-suffix",""),action.savedElements.placedElements[action.selectedItem]["data-suffix"]="",action.savedElements.placedElements[action.selectedItem]["data-prefix"]="",action.saveStorage(),action.showProperMenuForId(action.selectedItem))},affixCallbacks:function(a,b,c){var d="data-"+b;if("set"===c)c="prefix"===b?"suffix":"prefix",
"prefix"===b?($("#"+action.selectedItem).html($("#"+action.selectedItem).html().replace($(a).attr("data-last-value"),"")),$("#"+action.selectedItem).html($("#"+action.selectedItem).html().replace($("#"+action.selectedItem).attr("data-"+c),"")),$("#"+action.selectedItem).html($(a).val()+$("#"+action.selectedItem).html())):"suffix"===b&&($("#"+action.selectedItem).html($("#"+action.selectedItem).html().replace($("#"+action.selectedItem).attr("data-"+c),"")),$("#"+action.selectedItem).html($("#"+action.selectedItem).html().replace($(a).attr("data-last-value"),
"")),$("#"+action.selectedItem).html($("#"+action.selectedItem).html()+$(a).val())),"undefined"!=typeof $("#"+action.selectedItem).attr("data-"+c)&&("prefix"===c?$("#"+action.selectedItem).html($("#"+action.selectedItem).attr("data-"+c)+$("#"+action.selectedItem).html()):"suffix"===c&&$("#"+action.selectedItem).html($("#"+action.selectedItem).html()+$("#"+action.selectedItem).attr("data-"+c))),$("#"+action.selectedItem).attr(d,$(a).val()),$(a).attr("data-last-value",$(a).val()),action.savedElements.placedElements[action.selectedItem][d]=
$(a).val(),action.saveStorage();else if("get"===c)return b=$("#"+action.selectedItem).attr(d),$(a).attr("data-last-value",b),b},cgText:function(a,b,c,d,e){var g=a.split("~"),f=$("#"+g[3]).position().top+11,h="#custom"+c+"DivWrapper",k="#custom"+c+"Input";a="#"+g[0];if($(h).length)$(a).parent().toggleClass("leftTooltip"),$(h).toggle("display");else{var l=function(){var a=16*$(k).val().length;$(k).css("width",150<a?a:150);d(k)};b=action.getInputWrapper("custom"+c,78,f,0,0,b,!0);b.prependTo("#"+g[3]);
$(k).val(e(k));e=16*$(k).val().length;$(k).css("width",150<e?e:150);$(k).on("change",function(){l()});$(k).keydown(function(){l()});$(k).keyup(function(){l()});$(k).focusin(function(){action.isEditingText=!0});$(k).focusout(function(){action.isEditingText=!1});$(a).parent().toggleClass("leftTooltip");b.toggle("display");$(k).focus()}},cgSize:function(a,b,c,d,e,g,f,h,k,l,p,m){var q=b.split("~");b="#"+a+"DivWrapper";var n="#"+a+"Input",r="#"+q[0];void 0!==k&&k||(k=$("#"+q[3]).position().top+11);void 0!==
l&&l||(l=80);void 0!==p&&p||(p=q[1].substring(6,q[1].length));void 0!==m&&m||(m=1);if(!$(b).length){action.getInputWrapper(a,l,k,d,e,p,!1).prependTo("#"+q[3]);$("#"+a+"Decrement").on("click",function(a){action.handleInputButtonEvent(n,-1,g,f,c,h,a)});$("#"+a+"Increment").on("click",function(a){action.handleInputButtonEvent(n,1,g,f,c,h,a)});a=h(n,g,c,f,"get");try{$(n).val(Math.round(JSON.parse(a.substring(0,a.length-c.length))))}catch(t){console.log("There was an issue with setting the value of the input with idSelector:"+
n)}$(n).on("focus",function(){action.setHelpText("Try scrolling while hovering over the input text!")});$(n).on("change",function(){h(n,g,c,f,"set")});$(n).on("mousewheel",function(a){var b=0;0<a.deltaY&&!a.shiftKey?b=a.altKey?10:1:0>a.deltaY&&!a.shiftKey?b=a.altKey?-10:-1:0<a.deltaX&&a.shiftKey?b=JSON.parse($(n).attr("min"))-$(n).val():0>a.deltaX&&a.shiftKey&&(b=JSON.parse($(n).attr("max"))-$(n).val());$(n).val(Math.round(JSON.parse($(n).val())+b));h(n,g,c,f,"set");a.preventDefault()});$(n).focusin(function(){action.isEditingText=
!0});$(n).focusout(function(){action.isEditingText=!1});$(r).parent().attr("class","")}$(b).toggle("display")},handleInputButtonEvent:function(a,b,c,d,e,g,f){action.setHelpText("Shift+click to set to max/min. Alt+click to change by 10.");f.preventDefault();var h=JSON.parse($(a).attr("max")),k=JSON.parse($(a).attr("min"));f.shiftKey?action.sizeControl(a,(0<b?h:k)-JSON.parse($(a).val())):f.altKey?action.sizeControl(a,10*b):action.sizeControl(a,1*b);g(a,c,e,d,"set")},getInputWrapper:function(a,b,c,d,
e,g,f){var h=$('<div id="'+a+'DivWrapper" style="display: none;"></div>');f?$('<input type="text" id="'+a+'Input" style="top: '+JSON.parse(c)+"; right: "+JSON.parse(b)+'">').prependTo(h):(f=$('<div id="'+a+'Decrement" class="sizeControl" style="top: '+(JSON.parse(c)+15)+"; right: "+(JSON.parse(b)+93)+';"></div>'),$('<a href="#" class="fa fa-minus-circle" title="Try shift+clicking and alt+clicking!"></a>').appendTo(f),f.prependTo(h),$('<input type="number" id="'+a+'Input" min="'+d+'" max="'+e+'" title="Try using the scroll wheel!" style="top: '+
JSON.parse(c)+"; right: "+JSON.parse(b)+'">').prependTo(h),a=$('<div id="'+a+'Increment" class="sizeControl inputLabel" data-title="'+g+'" style="top:'+(JSON.parse(c)+15)+"; right: "+(JSON.parse(b)+11)+';"></div>'),$('<a href="#" class="fa fa-plus-circle" title="Try shift+clicking and alt+clicking!"></a>').appendTo(a),a.prependTo(h));return h},cgOption:function(a,b,c,d,e,g,f){var h=b.split("~");b="#"+a+"DivWrapper";var k="#"+h[0];0!==d&&d||(d=$("#"+h[3]).position().top+11);if($(b).length)$(b).is(":visible")?
$(k).parent().attr("class","leftTooltip"):$(k).parent().attr("class","");else{$('<div id="'+a+'DivWrapper" style="display: block;" class="options"></div>').prependTo("#"+h[3]);a=80;for(h=c.length-1;0<=h;h--){var l="#"+c[h]+"OptionDiv",p="#"+c[h]+"Option";$('<div id="'+c[h]+'OptionDiv" style="top: '+d+'px;"></div>').appendTo($(b));var m=f(c[h]);m.appendTo($("#"+c[h]+"OptionDiv"));$(l).css({right:a,width:$("#"+c[h]+"Option").width()+10,height:$("#"+c[h]+"Option").height()+2});"undefined"!=typeof m.attr("data-selected")&&
JSON.parse(m.attr("data-selected"))&&(m.parent().attr("data-selected","true"),m.parent().css("background-color","#21b9b0"),m.parent().css("border-color","#21b9b0"));e&&$(p).css({width:$("#"+c[h]+"OptionDiv").css("width")});0===h?$(l).attr("class","firstOption"):h===c.length-1&&($(l).attr("class","lastOption"),a+=2*JSON.parse($(l).css("border-right-width").replace(/\D+$/g,"")));a+=$(p).width()+0;(function(a){$(l).click(function(){g("#"+c[a]+"Option")})})(h);$(l).mouseover(function(){$(this).css("background-color",
"#21b9b0");$(this).css("border-color","#21b9b0")}).mouseout(function(){if("false"===$(this).attr("data-selected")||"undefined"===typeof $(this).attr("data-selected"))$(this).css("background-color","#54606e"),$(this).css("border-color","#54606e")})}$(k).parent().attr("class"," ");$(b).css("display","none");$(b).toggle("display")}},cgPosition:function(){this.cgSize("posLeft",constants.editArray[2],"px",0,$(".screen").width()-$("#"+action.selectedItem).width(),"left","left",action.updateSize,"","80",
"Left",2);this.cgSize("posTop",constants.editArray[2],"px",0,$(".screen").height()-$("#"+action.selectedItem).height(),"top","top",action.updateSize,"","208","Top",2);$("#"+action.selectedItem).on("drag",function(){$("#posLeftInput").val(Math.round(JSON.parse($("#"+action.selectedItem).position().left)));$("#posTopInput").val(Math.round(JSON.parse($("#"+action.selectedItem).position().top)))});$("#"+action.selectedItem).resize(function(){$("#posLeftInput").attr("max",$(".screen").width()-$("#"+action.selectedItem).width())})},
cgMultiPosition:function(){this.cgSize("multiPosLeft",constants.multiPosition,"px",0,0,"left","left",action.updateMultiPosition,"","80","Left",2);this.cgSize("multiPosTop",constants.multiPosition,"px",0,0,"top","top",action.updateMultiPosition,"","208","Top",2);for(var a=0;2>a;a++){var b=0==a?"#multiPosLeftInput":"#multiPosTopInput";$(b).attr("initialized")||($(b).val(0),$(b).attr("initialized","partial"),$(b).attr("lastVal",0))}action.updateMultiPosInputExtrema();$("#"+action.selectedItem).on("drag",
function(a,b){$(b.helper).attr("lastLeft")||$(b.helper).attr("lastLeft",b.position.left);$(b.helper).attr("lastTop")||$(b.helper).attr("lastTop",b.position.top);for(var e=b.position.left-JSON.parse($(b.helper).attr("lastLeft")),g=b.position.top-JSON.parse($(b.helper).attr("lastTop")),f=0;f<action.selectedItems.length;f++){var h=$("#"+action.selectedItems[f]).position();$("#"+action.selectedItems[f]).css("left",h.left+e);$("#"+action.selectedItems[f]).css("top",h.top+g)}$(b.helper).attr("lastLeft",
b.position.left);$(b.helper).attr("lastTop",b.position.top)})},updateMultiPosInputExtrema:function(){for(var a=0,b=0,c=0,d=0,e,g=0;g<action.selectedItems.length;g++){e="#"+action.selectedItems[g];var f=action.getElementExtreme(e,"maxleft","rel");f>a&&(a=f);f=action.getElementExtreme(e,"maxtop","rel");f>c&&(c=f);f=action.getElementExtreme(e,"minleft","rel");f<b&&(b=f);e=action.getElementExtreme(e,"mintop","rel");e<d&&(d=e)}$("#multiPosLeftInput").attr("max",a).attr("min",b);$("#multiPosTopInput").attr("max",
c).attr("min",d)},getElementExtreme:function(a,b,c){a.includes("#")||(a="#"+a);var d=$(a).position();switch(b){case "maxleft":return"rel"==c?JSON.parse($("#multiPosLeftInput").val())+($(".screen").width()-$(a).width()-d.left):$(".screen").width()-$(a).width();case "minleft":return"rel"==c?JSON.parse($("#multiPosLeftInput").val())+-1*d.left:0;case "maxtop":return"rel"===c?JSON.parse($("#multiPosTopInput").val())+($(".screen").height()-$(a).height()-d.top):$(".screen").height()-$(a).height();case "mintop":return"rel"===
c?JSON.parse($("#multiPosTopInput").val())+-1*d.top:0;default:return 0}},sizeControl:function(a,b){$(a).val(JSON.parse($(a).val())+b)},blurTimeout:null,backgroundBlur:function(a,b,c,d,e){if("set"===e)b=JSON.parse($(a).attr("max")),c=JSON.parse($(a).attr("min")),JSON.parse($(a).val())>=JSON.parse(b)&&$(a).val(b),JSON.parse($(a).val())<=JSON.parse(c)&&$(a).val(c),$("#miniBlurCanvas").show(),stackBlurImage("miniWallpaper","miniBlurCanvas",$(a).val(),!1),null!=action.blurTimeout&&clearTimeout(action.blurTimeout),
action.blurTimeout=setTimeout(function(){$("#miniBlurCanvas").removeClass("miniBlur");$("#miniBlurCanvas").animate({opacity:.25,width:320,height:568},1E3,function(){$("#miniBlurCanvas").hide();$("#miniBlurCanvas").addClass("miniBlur");$("#miniBlurCanvas").css("opacity","1")});stackBlurImage("wallpaper","blurcanvas",$(a).val(),!1);localStorage.setItem("wallpaperBlur",$(a).val())},400);else if("get"===e)return b=localStorage.getItem("wallpaperBlur"),null!=b&&"0"!=b?b:"0"},updateSize:function(a,b,c,
d,e){if("set"===e){e=JSON.parse($(a).attr("max"));var g=JSON.parse($(a).attr("min"));JSON.parse($(a).val())>=JSON.parse(e)&&$(a).val(e);JSON.parse($(a).val())<=JSON.parse(g)&&$(a).val(g);"width"===d?(e=Math.round($(a).val()),d=Math.round($("#"+action.selectedItem).position().left),e=Math.round(e-($(".screen").width()-d)),0<e&&(d=d-e+"px"),$("#posLeftInput").attr("max",$(".screen").width()-$("#"+action.selectedItem).width()),$("#posTopInput").attr("max",$(".screen").height()-$("#"+action.selectedItem).height()),
"Circle"===action.selectedItem.substring(3,9)?action.setCss([[action.selectedItem,["height","width","left"],[$(a).val()+c,$(a).val()+c,d]]]):"#iconSizeInput"===a?(a=[$(a).val()+c,d],action.setCss([["icon",["width","left"],a],["iconImg",["width","left"],a]])):action.setCss([[action.selectedItem,[b,"left"],[$(a).val()+c,d]]])):action.setCss(action.selectedItem,b,$(a).val()+c);action.saveStorage()}else if("get"===e)return $("#"+action.selectedItem).css(b)},updateMultiPosition:function(a,b,c,d,e){if("set"===
e){e=JSON.parse($(a).attr("max"));var g=JSON.parse($(a).attr("min"));d=JSON.parse($(a).val())-JSON.parse($(a).attr("lastVal"));JSON.parse($(a).val())>=e&&$(a).val(e);JSON.parse($(a).val())<=g&&$(a).val(g);for(e=0;e<action.selectedItems.length;e++)"partial"===$(a).attr("initialized")&&($("#"+action.selectedItems[e]).attr("initial"+b,$("#"+action.selectedItems[e]).css(b)),e===action.selectedItems.length-1&&$(a).attr("initialized","full"));var g=0,f;for(e=0;e<action.selectedItems.length;e++){f="#"+action.selectedItems[e];
var g=$(f).attr("initial"+b),g=g.substring(0,g.length-c.length),g=JSON.parse(g),h=g+JSON.parse($(a).val()),k,l;"left"===b?(k=action.getElementExtreme(f,"maxleft","abs"),l=action.getElementExtreme(f,"minleft","abs")):"top"===b?(k=action.getElementExtreme(f,"maxtop","abs"),l=action.getElementExtreme(f,"mintop","abs")):(k=1E3,l=-1E3);var p=$(f).position()[b],m=$(a).val()-JSON.parse($(a).attr("lastVal"));h<k&&h>l?(p===k-1||p===k)&&0<d?action.setCss(action.selectedItems[e],b,k):(p===l+1||p===l)&&0>d?action.setCss(action.selectedItems[e],
b,l):action.setCss(action.selectedItems[e],b,h):(h>=k&&0<m?(0!=k-p&&(m-=k-p),action.setCss(action.selectedItems[e],b,k),g-=m):h<=l&&0>m&&(0!=l-p&&(m-=l-p),action.setCss(action.selectedItems[e],b,l),g-=m),action.updateMultiPosInputExtrema(),$(f).attr("initial"+b,g+c))}$(a).attr("lastVal",$(a).val());action.saveStorage()}else if("get"===e)return $("#"+action.selectedItem).css(b)},cgGradientPurpose:function(){var a;this.cgOption("gradientType",constants.linearGradientArray[0],["background","text"],14,
!0,function(b){"#backgroundOption"===b?action.setCss([[action.selectedItem,["-webkit-background-clip","-webkit-text-fill-color"],["",""]]]):"#textOption"===b&&action.setCss([[action.selectedItem,["-webkit-background-clip","-webkit-text-fill-color"],["text","transparent"]]]);action.saveStorage();$(b).parent().css({"background-color":"#21b9b0","border-color":"#21b9b0"}).attr("data-selected","true");a!=b&&$(a).parent().css({"background-color":"#54606e","border-color":"#54606e"}).attr("data-selected",
"false");a=b},function(a){return $('<label id="'+a+'Option" style="text-align: '+a+';">'+a+"</label>")})},cgalign:function(){var a="#"+$("#"+action.selectedItem).css("text-align")+"Option";this.cgOption("align",constants.editArray[4],["left","center","right"],0,!0,function(b){a=action.basicOptionSelected(b,a,"text-align",$(b).attr("id").substring(0,$(b).attr("id").length-6))},function(a){return action.getBasicOptionElement(a,"text-align: "+a,"text-align")})},cgPosSystem:function(){var a="#"+action.multiPositioningSystem+
"Option";this.cgOption("posSystem",constants.positioningSystemOption,["relative","absolute"],0,!0,function(b){a=action.posSystemSelected(b,a)},function(a){var c=$('<label id="'+a+'Option">'+a+"</label>");"relative"==a&&c.attr("data-selected","true");return c})},posSystemSelected:function(a,b){action.multiPositioningSystem=$(a).attr("id").substring(0,$(a).attr("id").length-6);action.showMultiSelectionMenu();return action.ultraBasicOptionSelected(a,b)},basicOptionSelected:function(a,b,c,d){action.setCss(action.selectedItem,
c,d);return action.ultraBasicOptionSelected(a,b)},ultraBasicOptionSelected:function(a,b){$(a).parent().css({"background-color":"#21b9b0","border-color":"#21b9b0"}).attr("data-selected","true");b!=a&&$(b).parent().css({"background-color":"#54606e","border-color":"#54606e"}).attr("data-selected","false");return a},getBasicOptionElement:function(a,b,c){b=$('<label id="'+a+'Option" style="'+b+';">'+a+"</label>");$("#"+action.selectedItem).css(c)===a&&b.attr("data-selected","true");return b},cgcolor:function(a,
b,c){a?action.setCss(action.selectedItem,b,a):($("#"+c).spectrum({showInitial:!0,maxSelectionSize:66,localStorageKey:"spectrum",showAlpha:!0,showInput:!0,preferredFormat:"rgba",showPalette:!0,color:$("#"+this.selectedItem).css(b),palette:["black white #0074d9 #2c3e50 #27ae60 #e74c3c #393939 #3498db #2980b9 #2ecc71 #66cc99 #019875 #96281b #96281b #f64747 #e26a6a #f5ab35 #f39c12 #f89406 #f27935 #6c7a89 #95a5a6 #bdc3c7 #bfbfbf #674172 #663399 #8e44ad #9b59b6 #db0a5b #d2527f #f62459 #16a085 #d2d7d3 #4183d7 #59abe3 #3a539b".split(" ")]}),
setTimeout(function(){$("#"+c).spectrum("show")},0),$("#"+c).on("hide.spectrum",function(a,e){action.cgcolor(e.toRgbString(),b,c)}),$("#"+c).on("move.spectrum",function(a,e){action.cgcolor(e.toRgbString(),b,c)}))},cgStyle:function(){var a="#"+$("#"+action.selectedItem).css("font-style")+"Option";this.cgOption("style",constants.editArray[9],["italic","oblique","initial"],0,!0,function(b){a=action.basicOptionSelected(b,a,"font-style",$(b).attr("id").substring(0,$(b).attr("id").length-6))},function(a){return action.getBasicOptionElement(a,
"text-align: center; font-style: "+a,"font-style")})},cgBorderStyle:function(){var a="#"+$("#"+action.selectedItem).css("border-style")+"Option";this.cgOption("borderStyle",constants.borderArray[0],"dotted dashed solid double groove ridge inset outset".split(" "),20,!0,function(b){a=action.basicOptionSelected(b,a,"border-style",$(b).attr("id").substring(0,$(b).attr("id").length-6))},function(a){return action.getBasicOptionElement(a,"text-align:center; font-size:15px;","border-style")})},cguppercase:function(){var a=
"#"+$("#"+action.selectedItem).css("text-transform")+"Option";this.cgOption("uppercase",constants.editArray[7],["uppercase","capitalize","lowercase"],0,!0,function(b){a=action.basicOptionSelected(b,a,"text-transform",$(b).attr("id").substring(0,$(b).attr("id").length-6))},function(a){return action.getBasicOptionElement(a,"text-align: center; text-transform: "+a,"text-transform")})},cgweight:function(){var a,b=$("#"+action.selectedItem).css("font-weight");""!=b&&(a=isNaN(b)?"#"+b+"Option":"#boldnessOption");
this.cgOption("weight",constants.editArray[8],["boldness","bold","normal"],0,!0,function(b){a=action.basicOptionSelected(b,a,"font-weight","#boldnessOption"!=b?$(b).attr("id").substring(0,$(b).attr("id").length-6):$("#boldnessInput").val());"#boldOption"===b?$("#boldnessInput").val(700):"#normalOption"===b&&$("#boldnessInput").val(400)},function(a){if("boldness"===a){a=action.getInputWrapper("boldness",0,0,100,900,"",!1);a.css("display","block");var b,e=$("#"+action.selectedItem).css("font-weight");
try{b=JSON.parse(e)}catch(k){b="bold"===e?700:"normal"===e?400:100}var g=$(a).children(),f=$(g[0]),h=$(g[1]),g=$(g[2]);h.val(b);h.attr("step",100);h.css({"border-top-right-radius":0,"border-bottom-right-radius":0,"border-width":0,"border-color":"rgba(0,0,0,0)","background-color":"rgba(0,0,0,0)","border-style":""});a.css({width:120,height:45,"background-color":"rgba(0,0,0,0)","border-width":0});f.css({"border-width":0});g.css({"border-width":0});f.on("click",function(a){action.handleInputButtonEvent("#boldnessInput",
100,"font-weight","font-weight","",action.updateSize,a)});g.on("click",function(a){action.handleInputButtonEvent("#boldnessInput",-100,"font-weight","font-weight","",action.updateSize,a)});$(h).on("mousewheel",function(a){0<a.deltaY?$(h).val(Math.round(JSON.parse($(h).val())+($(h).val()===$(h).attr("max")?0:100))):$(h).val(Math.round(JSON.parse($(h).val())-($(h).val()===$(h).attr("min")?0:100)));a.preventDefault()});a.attr("id","boldnessOption");a.appendTo($("#boldnessOptionDiv"));a.attr("class",
"noHoverChange");"400"===e?($("#normalOptionDiv").attr("data-selected","true"),$("#normalOptionDiv").css("background-color","#21b9b0"),$("#normalOptionDiv").css("border-color","#21b9b0")):"700"===e?($("#boldOptionDiv").attr("data-selected","true"),$("#boldOptionDiv").css("background-color","#21b9b0"),$("#boldOptionDiv").css("border-color","#21b9b0")):e===$(h).val()&&(a.parent().attr("data-selected","true"),a.parent().css("background-color","#21b9b0"),a.parent().css("border-color","#21b9b0"));return a}b=
$('<label id="'+a+'Option" style="text-align: center; font-weight: '+a+';">'+a+"</label>");$("#"+action.selectedItem).css("font-weight")===a&&($("#"+$(b).attr("id")+"Div").attr("data-selected","true"),$("#"+$(b).attr("id")+"Div").css("background-color","#21b9b0"),$("#"+$(b).attr("id")+"Div").css("border-color","#21b9b0"));return b});$("#boldnessOptionDiv").css({height:29,width:110});$("#boldnessOption").css({top:-9,left:-12});$("#boldnessOption").hover(function(){$(this).css({"background-color":"rgba(0,0,0,0)",
"border-color":"rgba(0,0,0,0)"})});$("#boldnessOption").on("change",function(){action.setCss(action.selectedItem,"font-weight",$("#boldnessInput").val())});$("#boldnessOption").on("mousewheel",function(){action.setCss(action.selectedItem,"font-weight",$("#boldnessInput").val())})},openBackground:function(a){if("none"!=$("#wallpaper").attr("src")){var b=window.open("");if("blurry"===a){var c=document.getElementById("blurcanvas").cloneNode();c.className="";stackBlurImage("wallpaper",c,localStorage.getItem("wallpaperBlur"),
!1);a=c.toDataURL();c=document.createElement("img");c.src=a;c.style.display="block"}else"original"===a&&(c=$("#wallpaper").clone(),c.attr("style",""),c.attr("width",""),c.attr("height",""));$("body",b.document).append(c);$("head",b.document).append($("<title>Wallpaper</title>"))}else action.setHelpText('No wallpaper set. Click "Change Background" above to set one.')},showPanel:function(a){$("#"+a).css("visibility","visible")},showPanelHelpText:function(a){"none"===$("#"+a).css("display")&&action.setHelpText("Either scroll, use the arrow buttons, or use the arrow keys to navigate the element menu.")},
undo:function(){action.isUndoingRedoing=!0;if(-1<action.queuePosition){var a=action.actionQueue[action.queuePosition];action.runOppositeAction(a[0],a[1]);action.queuePosition--}else action.setHelpText("Nothing left to undo.");action.isUndoingRedoing=!1;console.log("Queue Position: "+action.queuePosition+" / "+(action.actionQueue.length-1))},redo:function(){action.isUndoingRedoing=!0;if(action.queuePosition<action.actionQueue.length-1){action.queuePosition++;var a=action.actionQueue[action.queuePosition];
action.runAction(a[0],a[1])}else action.setHelpText("Nothing left to redo.");action.isUndoingRedoing=!1;console.log("Queue Position: "+action.queuePosition+" / "+(action.actionQueue.length-1))},addAction:function(a){action.actionQueue.length=action.queuePosition+1;action.actionQueue.push(a);action.queuePosition=action.actionQueue.length-1;console.log("Queue Position: "+action.queuePosition+" / "+(action.actionQueue.length-1))},runOppositeAction:function(a,b){switch(a){case "addElement":if("string"===
typeof b[0])action.removeFromScreen(b[0],!1);else if("object"===typeof b[0])for(var c=0;c<b.length;c++)action.removeFromScreen(b[c][0],!1);break;case "removeElement":action.runAction("addElement",b);break;case "setCss":if("string"===typeof b[0])$("#"+b[0]).css(b[1],b[2]),action.savedElements.placedElements[b[0]][b[1]]=b[2];else for(c=0;c<b.length;c++)if("string"===typeof b[c][1])$("#"+b[c][0]).css(b[c][1],b[c][2]),action.savedElements.placedElements[b[c][0]][b[c][1]]=b[c][2];else for(var d=0;d<b[c][1].length;d++)$("#"+
b[c][0]).css(b[c][1][d],b[c][2][d]),"undefined"!=typeof action.savedElements.placedElements[b[c][0]]&&(action.savedElements.placedElements[b[c][0]][b[c][1][d]]=b[c][2][d]);action.saveStorage()}},runAction:function(a,b){switch(a){case "addElement":var c=function(a,b){$("#"+a+"Picker").length&&($("#"+a+"Picker").css("background-color","#21B9B0"),$("#"+a+"Picker").css("border-color","#21B9B0"));action.savedElements.placedElements[a]=b};if("string"===typeof b[0])c(b[0],b[1]);else if("object"===typeof b[0])for(var d=
0;d<b.length;d++)c(b[d][0],b[d][1]);$("#screenElements").empty();action.replaceElements();action.saveStorage();break;case "removeElement":action.runOppositeAction("addElement",b);break;case "setCss":if("string"===typeof b[0])$("#"+b[0]).css(b[1],b[3]),action.savedElements.placedElements[b[0]][b[1]]=b[3];else for(d=0;d<b.length;d++)if("string"===typeof b[d][1])$("#"+b[d][0]).css(b[d][1],b[d][3]),action.savedElements.placedElements[b[d][0]][b[d][1]]=b[d][3];else for(c=0;c<b[d][1].length;c++)$("#"+b[d][0]).css(b[d][1][c],
b[d][3][c]),"undefined"!=typeof action.savedElements.placedElements[b[d][0]]&&(action.savedElements.placedElements[b[d][0]][b[d][1][c]]=b[d][3][c]);action.saveStorage()}},elementPanel:function(a,b){b="undefined"!=typeof b?b:400;"cl"===a&&($("#clockList").toggle(b,action.showPanelHelpText("clockList")),this.showPanel("clockList"));"wl"===a&&($("#weatherList").toggle(b,action.showPanelHelpText("weatherList")),this.showPanel("weatherList"));"sl"===a&&($("#systemList").toggle(b,action.showPanelHelpText("systemList")),
this.showPanel("systemList"));"ml"===a&&($("#miscList").toggle(b,action.showPanelHelpText("miscList")),this.showPanel("miscList"))},getElementPanelIdSelector:function(a){if("cl"===a)return"#clockList";if("wl"===a)return"#weatherList";if("sl"===a)return"#systemList";if("ml"===a)return"#miscList"},toggleAllElementPanels:function(){action.elementPanel("cl",0);action.elementPanel("wl",0);action.elementPanel("sl",0);action.elementPanel("ml",0)},clearTheme:function(a){if(-1===a)if($(".yesClear").length||
$(".noClear").length||$(".clearLabel").length)action.clearTheme(0);else{a=$("#clearDiv").position().top+13;var b=a+4;$("#clear").parent().attr("class"," ");$('<button style="top:'+b+'px" type="button" class="noClear">No</button>').prependTo("#clearDiv");$('<button style="top:'+b+'px" type="button" class="yesClear">Yes</button>').prependTo("#clearDiv");$('<label style="top:'+a+'px" class="clearLabel">Clear Theme?</label>').prependTo("#clearDiv");$(".yesClear").click(function(){action.clearTheme(1)});
$(".noClear").click(function(){action.clearTheme(0)})}else 0===a?(action.hideClearLabel(),action.setHelpText("Not cleared, click to edit elements. (Also delete)")):1===a&&(localStorage.removeItem("placedElements"),action.savedElements={},action.movedElements={},action.selectedItem="",$("#screenElements").empty(),$(".newSVG").remove(),$(".svg").remove(),action.hideClearLabel(),action.hideElementPanelElements(),action.setBG(""),$(".screenoverlay").css("background-image",""),$(".screen").prepend('<img class="svg"/>'),
action.actionQueue=[],action.queuePosition=-1,action.isUndoingRedoing=!1,action.sizeQueueTimeout={timeout:null,isTimeoutRunning:!1,previousCssKey:"",previousAction:null,initialValue:""},action.setHelpText('Cleared. Click "Show Elements Panel" to place elements.'))},hideClearLabel:function(){$(".noClear").remove();$(".yesClear").remove();$(".clearLabel").remove();$("#clear").parent().attr("class","leftTooltip")},hideElementPanelElements:function(){for(var a=$(".elementPanel").children(),b=0;b<a.length;b++)if($(a[b]).is("div")){$(a[b]).is(":visible")&&
$(a[b-1]).click();for(var c=$($(a[b]).find("div")).find("li"),d=0;d<c.length;d++){var e=$(c[d]);"undefined"!=typeof e.attr("data-element")&&"#54606e"!=e.css("background-color")&&"rgb(84, 96, 110)"!=e.css("background-color")&&(e.css("background-color","#54606e"),e.css("border-color","#54606e"))}}},createLI:function(a,b){$("#"+b).empty();action.parseElementsArray(a,"#"+b);if(""===$("#"+b).attr("class")||"undefined"===typeof $("#"+b).attr("class")){var c=0,d="69px",e=$("#"+b).children().length;if(5<
e){var c=5,g=$('<li id="dummyOne"><a title=""><label></label></a></li>'),f=$('<li id="dummyTwo"><a title=""><label></label></a></li>');$("#"+b).append(g);$("#"+b).append(f)}else c=e-1,d="28px";$("#"+b).slick({centerMode:!0,centerPadding:d,infinite:!1,arrows:!0,slide:"li",speed:100,vertical:!0,initialSlide:0,slidesToShow:c,verticalSwiping:!1});$($("#"+b).find("[aria-live=polite]")).css("width","500px");$(".slick-slide").css("float","none");c=$('<button class="slick-arrow slickNext fa fa-arrow-down" style="display: block;"></button>');
$($("#"+b).find(".slick-next")[0]).remove();$(c).html("");$(c).click(function(){action.slickProgress("next",b)});$("#"+b).append(c);c=$('<button class="slick-arrow slickPrev fa fa-arrow-up" style="display: block;"></button>');$($("#"+b).find(".slick-prev")[0]).remove();$(c).html("");$(c).click(function(){action.slickProgress("prev",b)});$("#"+b).append(c);5>=e&&$($("#"+b).find("[aria-live=polite]")).attr("style","height: 126px!important; padding: 28px 0px;");action.setCarouselOpacity(b)}else $("#"+
b).attr("class","");$("#"+b).on("mousewheel",function(a){0<a.deltaY?($("#"+b).slick("slickPrev"),action.setCarouselOpacity(b)):action.shouldSlickProgress(b)&&($("#"+b).slick("slickNext"),action.setCarouselOpacity(b));a.preventDefault()});$("#"+b).hover(function(){$(document).keyup(function(){38===event.keyCode?$("#"+b).slick("slickPrev"):40===event.keyCode&&action.shouldSlickProgress(b)&&$("#"+b).slick("slickNext");action.setCarouselOpacity(b)})},function(){$(document).unbind("keyup")});$("#"+b+":hover").length&&
$("#"+b).mouseenter()},slickProgress:function(a,b){switch(a){case "prev":$("#"+b).slick("slickPrev");action.setCarouselOpacity(b);break;case "next":action.shouldSlickProgress(b)&&$("#"+b).slick("slickNext")}action.setCarouselOpacity(b)},shouldSlickProgress:function(a){return 5>=$($("#"+a).find(".slick-track")[0]).children().length||"dummyOne"!=$($("#"+a).find("[data-slick-index="+(JSON.parse($("#"+a).find(".slick-center").attr("data-slick-index"))+1)+"]")[0]).attr("id")},parseElementsArray:function(a,
b){Object.keys(a).forEach(function(c){if(a[c].constructor===Object)action.parseElementsArray(a[c],b);else if("title"===c){var d=a[c].toLowerCase().replace(/\s/g,""),e=d+"Category",d=d+"SubCategory";$('<li id="'+e+'" class="categoryTitle">'+a[c]+"</li>").appendTo($(b));$('<ul style="display: none" id="'+d+'" class="subCategory"></ul>').appendTo("#"+e)}else e="#"+a.title.toLowerCase().replace(/\s/g,"")+"SubCategory",$('<li id="'+c+'Picker" data-element="'+c+'">'+a[c]+"</li>").appendTo($(e)),$("#"+c).length&&
($("#"+c+"Picker").css("background-color","#21b9b0"),$("#"+c+"Picker").css("border-color","#21b9b0"))})},setCarouselOpacity:function(a){var b=$("#"+a).find(".slick-center").attr("data-slick-index"),c=$("#"+a).find("[data-slick-index="+(JSON.parse(b)-1)+"]"),d=$("#"+a).find("[data-slick-index="+JSON.parse(b)+"]"),e=$("#"+a).find("[data-slick-index="+(JSON.parse(b)+1)+"]");$("#"+a).find("[data-slick-index="+(JSON.parse(b)-2)+"]").css({opacity:.07,"font-size":"16px",height:"auto",border:"1px solid transparent"});
$(c).css({opacity:.5,"font-size":"16px",height:"auto",border:"1px solid transparent"});$(c).removeClass("elementPanelPreview");$(d).css({opacity:1,"pointer-events":"auto","font-size":"30px",border:"2px solid #21b9b0"});$(d).addClass("elementPanelPreview");$(e).css({opacity:.5,"font-size":"16px",height:"auto",border:"1px solid transparent"});$(e).removeClass("elementPanelPreview");$("#"+a).find("[data-slick-index="+(JSON.parse(b)+2)+"]").css({opacity:.07,"font-size":"16px",height:"auto",border:"1px solid transparent"});
$("#"+a).find("[data-slick-index="+(JSON.parse(b)-2)+"]").find("ul").first().hide();c.find("ul").first().hide();$(d).find("ul").first().show();e.find("ul").first().hide();$("#"+a).find("[data-slick-index="+(JSON.parse(b)+2)+"]").find("ul").first().hide();a=d.clone().children().remove().end().text();10<=a.length&&($(d).css("height",34),14<a.length?$(d).css("font-size",17):$(d).css("font-size",20))},saveTheme:function(){if(null!==action.wallpaper&&"null"!==action.wallpaper){$("#wallpaper").hide();var a=
document.getElementById("blurcanvas");a.style.display="none";a.className="";a=a.toDataURL();7<a.length?($(".screen").css("background-image","url("+a+")"),action.wallpaper=a,action.saveStorage()):$(".screen").css("background-image","url("+action.wallpaper+")");$("#blurcanvas").remove();$("#wallpaper").remove();$("miniWallpaper").remove();$("miniBlurCanvas").remove()}$(".sidePanel").css("display","none");$("#screenCover").css("display","none");$(".elementPanel").css("display","none");$(".sidePanel").css("opacity",
"1");window.location="ios:webToNativeCall"},setBG:function(a){if(""!=a){$("#wallpaper").attr("src",a);$("#wallpaper").css("display","initial");action.wallpaper=a;a=localStorage.getItem("wallpaperBlur");if(null===a||""===a||"null"===a)a=0;stackBlurImage("wallpaper","blurcanvas",a,!1);a=document.getElementById("wallpaper");var b=document.createElement("canvas");b.style.display="none";b.width=a.width/2;b.height=a.height/2;b.getContext("2d").drawImage(a,0,0,a.width/2,a.height/2);$("#miniWallpaper").attr("src",
b.toDataURL())}else $("#wallpaper").attr("src",""),$("#wallpaper").hide(),(b=document.getElementById("blurcanvas"))&&b.getContext("2d").clearRect(0,0,b.width,b.height),action.wallpaper=null,localStorage.setItem("wallpaperBlur","0"),action.showIconMenu(constants.toolArray,-1),$("#bgInput").after($("#bgInput").clone(!0)).remove();action.saveStorage("wallpaper")},setOverlay:function(a){document.querySelector(".svg").src=a;$(".screenoverlay").css("background-image","url("+a+")");action.savedElements.overlay=
a;"data:image/svg"===a.split("+")[0]&&setTimeout(function(){showSVG(".svg",!0);setTimeout(function(){var a=document.querySelector(".newSVG").innerHTML;$(".newSVG").empty();var c=document.createElement("div");c.className="newSVG";c.innerHTML=a;document.querySelector(".screen").appendChild(c)},0)},0);action.saveStorage()},saveStorage:function(a){"wallpaper"===a?localStorage.setItem("wallpaper",action.wallpaper):localStorage.setItem("placedElements",JSON.stringify(action.savedElements))},remakeDIV:function(a){var b=
document.createElement("div");b.id=a;b.style.position="absolute";document.getElementById("screenElements").appendChild(b);this.addDraggable(a);loadClock();weatherdivs();systemdivs();miscDivs()},replaceElements:function(){Object.keys(this.savedElements.placedElements).forEach(function(a){action.remakeDIV(a);var b=action.savedElements.placedElements[a];Object.keys(b).forEach(function(c){var d=b[c];"fontSize"===c?c="font-size":"textAlign"===c&&(c="text-align");"icon"===a?($("#icon").css(c,d),"width"!==
c&&"height"!==c||$(".icon").css(c,d)):"text"===a.substring(0,4)&&"innerHTML"===c?$("#"+a).html(d):"data-prefix"===c?($("#"+a).attr("data-prefix",d),$("#"+a).html(d+$("#"+a).html())):"data-suffix"===c?($("#"+a).attr("data-suffix",d),$("#"+a).html($("#"+a).html()+d)):$("#"+a).css(c,d)})})},loadFromStorage:function(){localStorage.placedElements&&(2<localStorage.placedElements.length?(action.setHelpText("Click elements to adjust styles."),this.savedElements=JSON.parse(localStorage.placedElements),this.movedElements=
this.savedElements.placedElements,this.savedElements.overlay&&this.setOverlay(this.savedElements.overlay),this.savedElements.placedElements&&this.replaceElements(),this.savedElements.iconName&&this.setNewIcon(this.savedElements.iconName,1)):action.setHelpText("Select Add elements to place elements."));this.savedElements.wallpaper&&10<this.savedElements.wallpaper.length&&(localStorage.setItem("wallpaper",this.savedElements.wallpaper),this.savedElements.wallpaper="");action.wallpaper=localStorage.getItem("wallpaper");
""!=action.wallpaper&&null!=action.wallpaper&&"null"!=action.wallpaper&&this.setBG(action.wallpaper)},addDraggable:function(a){var b;b="icon"===a?"":$(".screen");$("#"+a).draggable({containment:b,start:function(b,d){$(".dLine[title='"+a+"']").remove();action.selectedItem!=a&&handleScreenClick(b);action.sizeQueueTimeout.initialValue=[$("#"+a).position().top,$("#"+a).position().left]},stop:function(b,d){var e=$("#"+a).position();action.addAction(["setCss",[[a,["top","left"],action.sizeQueueTimeout.initialValue,
[e.top,e.left]]]]);action.sizeQueueTimeout.initialValue="";action.savedElements.placedElements[a].left=e.left;action.savedElements.placedElements[a].top=e.top;action.saveStorage();if("true"==localStorage.snap){var g=$("<div>",{"class":"dLine",title:a}),f=$("#"+a),e=f.position();g.insertBefore(f);g.css({top:e.top+"px",left:e.left+"px",width:f.width(),height:f.height()})}},snap:".dLine"})},addtoScreen:function(a){action.setHelpText("Click element to adjust style. (Also delete)");var b=document.createElement("div");
b.id=a;"box"===a.substring(0,3)?(b.style.width="50px",b.style.height="50px",b.style.backgroundColor="red",b.style.zIndex=1,b.style.borderColor="red",b.style.borderStyle="solid",b.style.borderWidth="0px","Circle"===a.substring(3,9)&&(b.style.borderRadius="999px")):b.style.zIndex=2;document.getElementById("screenElements").appendChild(b);this.addDraggable(a);this.movedElements[a]={};this.savedElements.placedElements=this.movedElements;$("#"+a).css("position","absolute");$("#"+a).css("font-size","30px");
$("#"+a).css("color","white");$("#"+a).css("font-family","helvetica");"box"===a.substring(0,3)?(this.savedElements.placedElements[a].width="50px",this.savedElements.placedElements[a].height="50px",this.savedElements.placedElements[a]["background-color"]="red",this.savedElements.placedElements[a]["z-index"]=1,this.savedElements.placedElements[a]["border-color"]="red",this.savedElements.placedElements[a]["border-style"]="solid",this.savedElements.placedElements[a]["border-width"]="0px",this.savedElements.placedElements[a].position=
"absolute",this.savedElements.placedElements[a].top="248px",this.savedElements.placedElements[a].left="130px","Circle"===a.substring(3,9)&&(this.savedElements.placedElements[a]["border-radius"]="999px")):"icon"===a?(this.savedElements.placedElements[a].position="absolute",this.savedElements.placedElements[a].top="248px",this.savedElements.placedElements[a].left="130px",this.savedElements.placedElements[a].width="40px",$("#"+a).css("width","40px")):(this.savedElements.placedElements[a]["z-index"]=
2,this.savedElements.placedElements[a].color="white",this.savedElements.placedElements[a]["font-family"]="helvetica",this.savedElements.placedElements[a].position="absolute",this.savedElements.placedElements[a]["font-size"]="30px",this.savedElements.placedElements[a].top="248px",this.savedElements.placedElements[a].left="130px");loadClock();weatherdivs();systemdivs();miscDivs();var b=$(b),c=b.position().left,d=c+b.width();320<d&&(c-=d-320,b.css("left",0<c?c:0),this.savedElements.placedElements[a].left=
0<c?c:0);this.saveStorage();action.isUndoingRedoing||action.addAction(["addElement",[a]]);document.getElementById(a+"Picker").style.backgroundColor="#21b9b0";document.getElementById(a+"Picker").style.borderColor="#21b9b0"},removeFromScreen:function(a,b){0===action.selectedItems.length&&(action.isUndoingRedoing?action.actionQueue[action.queuePosition][1]=[a,action.savedElements.placedElements[a]]:action.addAction(["removeElement",[a,action.savedElements.placedElements[a]]]));var c=document.getElementById("screenElements"),
d=document.getElementById(a);c.removeChild(d);delete this.movedElements[a];this.savedElements.placedElements=this.movedElements;this.saveStorage();this.showIconMenu(constants.toolArray,-1);document.getElementById(a+"Picker")&&(document.getElementById(a+"Picker").style.backgroundColor="#54606e",document.getElementById(a+"Picker").style.borderColor="#54606e");action.selectedItem=""},removeSelectedFromScreen:function(a){if(0===action.selectedItems.length)action.removeFromScreen(action.selectedItem,a);
else{a=["removeElement",[]];for(var b=0;b<action.selectedItems.length;b++)a[1].push([action.selectedItems[b],action.savedElements.placedElements[action.selectedItems[b]]]),action.removeFromScreen(action.selectedItems[b],b===action.selectedItems.length-1);action.addAction(a)}},showIconMenu:function(a,b){$("#icons").empty();$(".elementPanel").scrollTop(0);$("#logo").attr("title","Now Showing: "+action.getTitleForArray(a));for(var c=0;c<a.length;c++){var d=document.createElement("div");d.id="Test";var e=
document.createElement("li"),g=a[c].split("~");"element"===g[0]&&$(".elementPanel").is(":visible");e.className=g[2];e.id=g[0];d.appendChild(e);$("#icons").append(d);-2<b&&(-1===b||c===b)&&(d.id=g[3])}},getTitleForArray:function(a){switch(a){case constants.toolArray:return"Main Menu";case constants.editArray:return"Element Styles Menu";case constants.customTextArray:return"Custom Text Menu";case constants.shadowArray:return"Element Shadow Menu";case constants.boxShadowArray:return"Box Shadow Menu";
case constants.boxEditArray:return"Box Styles Menu";case constants.circleEditArray:return"Circle Styles Menu";case constants.iconArray:return"Icon Styles Menu";case constants.linearGradientArray:return"Linear Gradient Menu";case constants.linearBoxGradientArray:return"Linear Box Gradient Menu";case constants.backgroundArray:return"Background Menu";case constants.transformArray:return"Transform Menu";case constants.affixArray:return"Suffix/Prefix Menu";case constants.borderArray:return"Border Menu"}if(a.toString()===
constants.notSoConstantArray.toString())return"Custom Combination Menu"},showMultiSelectionMenu:function(){if(0<action.selectedItems.length){for(var a=[],b=action.getProperMenuForId(action.selectedItems[0]),c=0;c<b.length;c++)b[c]===constants.editArray[2]&&"relative"===action.multiPositioningSystem?a.push(constants.multiPosition):a.push(b[c]);for(c=1;c<action.selectedItems.length;c++)for(var b=action.getProperMenuForId(action.selectedItems[c]),d=0;d<a.length;d++)"multi"!=a[d].split("~")[0].substring(0,
5)&&-1===b.indexOf(a[d])&&(a.splice(d,1),d--);a.unshift(constants.positioningSystemOption);constants.notSoConstantArray=a;action.showIconMenu(a,-1)}else""!=action.selectedItem?action.showProperMenuForId(action.selectedItem):action.showIconMenu(constants.toolArray,-1)},showProperMenuForId:function(a){action.showIconMenu(action.getProperMenuForId(a),-1)},getProperMenuForId:function(a){return"icon"===a?constants.iconArray:"text"===a.substring(0,4)?constants.customTextArray:"boxCircle"===a.substring(0,
9)?constants.circleEditArray:"box"===a.substring(0,3)?constants.boxEditArray:constants.editArray},timeout:"",lastNotificationTime:!1,animateHelp:function(a,b,c){$("#tips").animate({opacity:b,top:"toggle"},c,function(){a&&action.setHelpText(a)})},setHelpText:function(a){var b=$("#tips").is(":visible");clearTimeout(action.timeout);$("#tips").is(":animated")||(b?$("#helpinfo").text()!=a?(b=Date.now(),action.lastNotificationTime&&50<b-action.lastNotificationTime&&(action.lastNotificationTime=Date.now(),
action.animateHelp(a,1,300))):action.timeout=setTimeout(function(){action.animateHelp(!1,0,200)},5E3):($("#helpinfo").text(a),action.lastNotificationTime=Date.now(),action.animateHelp(!1,1,300),action.timeout=setTimeout(function(){action.animateHelp(!1,0,200)},5E3)))},setEditMenuInputsState:function(a,b,c){c||(c="");c="string"===typeof c?action.getProperMenuForId(c):c;b||(b=constants.editArray.length);if(-1>=a)for(var d=0;d<b&&d<c.length;d++){var e=c[d].split("~");""===constants.preloadWhitelist[e[0]]&&
(-2===a&&2>$("#"+e[3]).children().length||-1===a&&1<$("#"+e[3]).children().length)&&$("#"+e[0]).trigger("click")}else-1<a&&a<c.length?$("#"+constants.editArray[0].split("~")[a]).trigger("click"):console.log("That's not a valid index. The state should be between (inclusive) -2 and "+(constants.editArray.length-1))},arrowKey:function(a,b,c){var d=$("#"+action.selectedItem),e=c.altKey?10:1;if("left"===a){var g=d.position().left-e;c.shiftKey&&(g=0);g=0<g?g:0}else"right"===a?(g=d.position().left+e,c.shiftKey&&
(g=320),g=320>g+d.width()?g:320-d.width()):"up"===a?(g=d.position().top-e,c.shiftKey&&(g=0),g=0<g?g:0):"down"===a&&(g=d.position().top+e,c.shiftKey&&(g=568),g=568>g+d.height()?g:568-d.height());a=b.toLowerCase();action.setCss(action.selectedItem,a,g);b=$("#pos"+b+"Input");0<b.length&&b.val(g)},isASelectedItem:function(a){for(var b=0;b<action.selectedItems.length;b++)if(action.selectedItems[b]===a)return!0;return!1},removeFromMultiSelection:function(a){action.selectedItems.forEach(function(b,c){b===
a&&action.selectedItems.splice(c,1)})}};function resizeWall(a,b,c){var d=document.createElement("canvas"),e=d.getContext("2d");d.width=b;d.height=c;e.drawImage(a,0,0,b,c);return d.toDataURL()}var tempWall;
function chooseWallSize(a){var b,c;switch(a){case "i5":b=640;c=1136;break;case "i6":b=750;c=1334;break;case "6Plus":b=1080,c=1920}a=new Image;a.onload=function(){var a=resizeWall(this,b,c);localStorage.setItem("wallpaperBlur",null);try{action.setBG(a)}catch(e){}$("#wallSelector").css("display","none")};a.src=tempWall}
function uploadedImage(a){a=a.target.files;var b,c,d;b=0;for(d;d=a[b];b++)c=new FileReader,c.onload=function(a){return function(a){"cgBackground"===action.uploadSelection?($("#wallSelector").css("display","block"),tempWall=a.target.result):"cgOverlay"===action.uploadSelection&&action.setOverlay(a.target.result)}}(d),c.readAsDataURL(d)}
window.onload=function(){action.loadFromStorage();setTimeout(function(){action.showIconMenu(constants.toolArray,-1);$("#clockList").toggle("display");action.createLI(elementPanel.clockElements,"clockList");$("#weatherList").toggle("display");action.createLI(elementPanel.weatherElements,"weatherList");$("#systemList").toggle("display");action.createLI(elementPanel.systemElements,"systemList");$("#miscList").toggle("display");action.createLI(elementPanel.miscElements,"miscList")},0)};
$(document).on("keydown",function(a){if(""!=action.selectedItem)switch(a.keyCode){case 37:action.isEditingText||action.arrowKey("left","Left",a);break;case 38:action.isEditingText||action.arrowKey("up","Top",a);break;case 39:action.isEditingText||action.arrowKey("right","Left",a);break;case 40:action.isEditingText||action.arrowKey("down","Top",a);break;case 46:action.isEditingText||action.removeSelectedFromScreen(!0)}switch(a.keyCode){case 89:a.ctrlKey&&action.redo();break;case 90:a.ctrlKey&&action.undo()}});
$(".toolPanel").on("click",function(a){action.toolPanel(a)});var fontMoving=!1;$("#font").on("touchmove",function(){fontMoving=!0});$("#font").on("touchend",function(a){1==fontMoving?fontMoving=!1:$(a.target).is("li")?action.setFont(a.target.title):action.cgfont()});$(".iconList").on("click",function(a){""!=a.target.id?action.setNewIcon(a.target.id):$(".iconList").toggle("display")});
$(".elementPanel").on("click",function(a){if(a.target.id&&"H3"===a.target.tagName){action.elementPanel(a.target.id);for(var b=$(".elementPanel").children(),c=0;c<b.length;c++)$(b[c]).attr("id")!=a.target.id&&1<$(action.getElementPanelIdSelector($(b[c]).attr("id"))).children().length&&$(action.getElementPanelIdSelector($(b[c]).attr("id"))).is(":visible")&&action.elementPanel($(b[c]).attr("id"))}else $(a.target).parent().hasClass("subCategory")?(a=$(a.target).attr("data-element"),document.getElementById(a)?
action.removeFromScreen(a,!1):action.addtoScreen(a)):$(a.target).hasClass("categoryTitle")&&!$(a.target).hasClass("slick-center")&&(b=$(a.target).parent().parent().parent(),b.slick("slickGoTo",JSON.parse($(a.target).attr("data-slick-index")),!1),action.setCarouselOpacity(b.attr("id")))});$(".screen").click(function(a){handleScreenClick(a)});
function handleScreenClick(a){function b(a,b){$("#leftSelector").attr("title","Main Menu");$("#"+a).css("outline","0px solid transparent");action.removeFromMultiSelection(a);b&&(action.showIconMenu(constants.toolArray,-1),action.selectedItem="",0<$("#fList").length&&$("#fList").is(":visible")&&action.cgfont())}if(""===a.target.id&&""!=action.selectedItem){if(0<action.selectedItems.length)for(var c=0;c<action.selectedItems.length;c++)b(action.selectedItems[c],!1),c--;b(action.selectedItem,!0);action.setHelpText("Clicking off an element de-selects it. Click back on it to re-select.")}else if("screen"!=
a.target.id&&""!=a.target.id)if(a.target.id===action.selectedItem)if(0<action.selectedItems.length)if(a.shiftKey)action.selectedItems.forEach(function(a,c,g){a===action.selectedItem&&(b(a,!1),0<action.selectedItems.length&&(action.selectedItem=action.selectedItems[0]),1===action.selectedItems.length&&action.selectedItems.splice(0,1),action.showMultiSelectionMenu())});else{console.log(a.type);for(c=0;c<action.selectedItems.length;c++)a=action.selectedItems[c],a!=action.selectedItem&&b(a,!1),action.selectedItems.splice(c,
1),c--;action.showMultiSelectionMenu()}else b(action.selectedItem,!0);else if(a.shiftKey&&action.isASelectedItem(a.target.id)){if(0<action.selectedItems.length){for(c=0;c<action.selectedItems.length;c++)if(action.selectedItems[c]===a.target.id){action.selectedItems.splice(c,1);break}b(a.target.id,!1)}action.showMultiSelectionMenu()}else if(a.shiftKey&&""!=action.selectedItem)action.isASelectedItem(action.selectedItem)||action.selectedItems.push(action.selectedItem),action.selectedItems.push(a.target.id),
$("#"+a.target.id).css("outline","1px solid #21b9b0"),action.showMultiSelectionMenu();else if(!("dragstart"===a.type&&0<action.selectedItems.length)){b(action.selectedItem,!1);for(c=0;c<action.selectedItems.length;c++)b(action.selectedItems[c],!1),c--;"box"===a.target.id.substring(0,3)||"icon"===a.target.id?action.setHelpText("Pick a style adjustment from the left menu."):action.setHelpText("Pick a style adjustment from the left menu, scroll for more options.");action.selectedItem=a.target.id;$("#"+
a.target.id).css("outline","1px solid #21b9b0");""===action.selectedItem&&$(".elementPanel").data("prevHiddenState",$(".elementPanel").is(":visible"));action.showMultiSelectionMenu();$("#leftSelector").attr("title","Element Menu")}}
$(".screen").on("mousewheel",function(a){var b=$("#"+action.selectedItem);if(0<b.length&&0<$("#"+action.selectedItem+":hover").length){var c=0<a.deltaY?a.altKey?10:1:a.altKey?-10:-1;if("box"===action.selectedItem.substring(0,3)||"icon"===action.selectedItem){var d=b.height()+c,d=0<d?d:1,c=b.width()+c,c=0<c?c:1;action.setCss([[action.selectedItem,["height","width"],[d+"px",c+"px"]]]);"icon"===action.selectedItem?($(b.children()[0]).css("height",d).css("width",d),b=$("#iconSizeInput"),0<b.length&&b.val(d)):
(b=$("#widthSizeInput"),0<b.length&&b.val(c),"Circle"!=action.selectedItem.substring(3,9)&&(b=$("#heightSizeInput"),0<b.length&&b.val(d)))}else d=b.css("font-size"),d=JSON.parse(d.substring(0,d.length-2)),d+=c,d=5<d?d:5,action.setCss(action.selectedItem,"font-size",d+"px"),b=$("#fontSizeInput"),0<b.length&&b.val(d);action.saveStorage();a.preventDefault()}});var scrollLimitForEditMenu=120;$("#bgInput").on("change",uploadedImage);$("#tips").mouseenter(function(){clearInterval(action.timeout)});
$("#tips").mouseleave(function(){action.timeout=setTimeout(function(){$("#tips").hide("slide",{direction:"up"})},1250)});function createGrid(a,b){var c,d=$(".grids"),e=d.height(),g=d.width(),f=Math.floor(g/a),h=Math.floor(e/b);for(c=0;c<=f;c++)$("<div />").css({top:0,left:c*b,width:1,height:e}).addClass("gridlines").appendTo(d);for(c=0;c<=h;c++)$("<div />").css({top:c*a,left:0,width:g,height:1}).addClass("gridlines").appendTo(d);$(".gridlines").show()}
$("#menutips").on("click",function(){"-300px"===$("#tips").css("top")?($("#tips").css("top","100px"),localStorage.setItem("hideTips",!1),$(this).attr("title","On")):($("#tips").css("top","-300px"),localStorage.setItem("hideTips",!0),$(this).attr("title","Off"))});
$("#gridtips").on("click",function(){void 0===$(".gridlines").css("display")?($(this).attr("title","On"),createGrid(constants.gridSizeLeft,constants.gridSizeTop),localStorage.setItem("gridTips",!0)):($(".grids").empty(),$(this).attr("title","Off"))});$("#snaptips").on("click",function(){"true"==localStorage.snap?(localStorage.snap="false",$(this).attr("title","Off"),$(".dLine").remove()):(localStorage.snap="true",$(this).attr("title","On"))});
"true"==localStorage.snap&&$("#snaptips").attr("title","On");localStorage.hideTips="true";"true"===localStorage.hideTips&&($("#tips").css("top","-300px"),$("#menutips").attr("title","Off"));$(".select-menu").click(function(){$(this).toggleClass("menu-on");$(".menulist").toggle()});